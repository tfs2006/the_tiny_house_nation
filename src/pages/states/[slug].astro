---
import { Astro } from 'astro';
import BaseLayout from '../../layouts/BaseLayout.astro';
import JsonLd from '../../components/JsonLd.astro';

export async function getStaticPaths() {
  const states = (await import('../../data/states.json')).default;
  return states.map(({ state }) => ({
    params: { slug: state.toLowerCase().replace(/\s+/g, '-') },
    props: { state }
  }));
}

const { slug } = Astro.params;
const { state } = Astro.props;
const stateName = state || slug;
const canonical = `https://tfs2006.github.io/the_tiny_house_nation/states/${slug}/`;
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": `${stateName} Tiny House Laws, Builders & Resources`,
  "description": `Tiny house laws, builders, and resources for ${stateName}. Find guides, legal info, and top picks for tiny living in ${stateName}.`,
  "url": canonical
};
---

<BaseLayout title={`${stateName} Tiny House Laws, Builders & Resources | The Tiny House Nation`}
  description={`Tiny house laws, builders, and resources for ${stateName}. Find guides, legal info, and top picks for tiny living in ${stateName}.`}
  canonical={canonical}>
  <Fragment slot="head">
    <JsonLd data={jsonLd} />
  </Fragment>
  <h1>{stateName} Tiny House Laws, Builders & Resources</h1>
  <p>Discover tiny house laws, top builders, and resources for <strong>{stateName}</strong>. (Content coming soon.)</p>
  <a href="/the_tiny_house_nation/states/">‚Üê Back to all states</a>
</BaseLayout>
