<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiny House Build Companion | Free Planner & Calculator</title>
    <meta name="description" content="The ultimate free tool for tiny house builders. Plan your budget, estimate trailer weight, size off-grid solar panels, calculate insulation R-values, and track water usage.">
    <meta name="keywords" content="tiny house planner, tiny house calculator, solar sizing calculator, trailer weight estimator, tiny home budget, off-grid calculator, DIY tiny house">
    <meta name="author" content="Tiny House Nation">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Tiny House Build Companion | Free Planner & Calculator">
    <meta property="og:description" content="Plan your tiny house build with precision. Free tools for budgeting, weight estimation, solar sizing, and more.">
    
    <!-- JSON-LD for Generative Engine Optimization (GEO) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Tiny House Build Companion",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "A comprehensive utility suite for DIY tiny house builders including budget tracking, weight estimation, and solar system sizing.",
      "featureList": ["Budget Tracker", "Weight Estimator", "Solar Sizing Calculator", "Insulation R-Value Calculator", "Water Usage Estimator", "PDF Report Export"]
    }
    </script>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CPZ8WZRMF0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CPZ8WZRMF0');
    </script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="brand">
                <i class="fas fa-home"></i>
                <span>THN Companion</span>
            </div>
            <nav role="tablist">
                <button class="nav-btn active" data-tab="dashboard" role="tab" aria-selected="true" title="Dashboard">
                    <i class="fas fa-columns"></i> <span>Dashboard</span>
                </button>
                <button class="nav-btn" data-tab="budget" role="tab" aria-selected="false" title="Budget Tracker">
                    <i class="fas fa-calculator"></i> <span>Budget Tracker</span>
                </button>
                <button class="nav-btn" data-tab="weight" role="tab" aria-selected="false" title="Weight Estimator">
                    <i class="fas fa-balance-scale"></i> <span>Weight Estimator</span>
                </button>
                <button class="nav-btn" data-tab="solar" role="tab" aria-selected="false" title="Solar Sizing">
                    <i class="fas fa-sun"></i> <span>Solar Sizing</span>
                </button>
                <button class="nav-btn" data-tab="insulation" role="tab" aria-selected="false" title="Insulation">
                    <i class="fas fa-layer-group"></i> <span>Insulation</span>
                </button>
                <button class="nav-btn" data-tab="water" role="tab" aria-selected="false" title="Water">
                    <i class="fas fa-tint"></i> <span>Water</span>
                </button>
            </nav>
            <div class="save-status" id="saveStatus" aria-live="polite">
                <i class="fas fa-check-circle"></i> Auto-saved
            </div>
        </aside>

        <main class="content-area">
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <header>
                    <div>
                        <h1>Project Overview</h1>
                        <p>Welcome to your <strong>Tiny House Build Companion</strong>. This all-in-one planning tool helps DIY builders manage the most critical aspects of their project: <strong>Budget</strong>, <strong>Weight</strong>, and <strong>Off-Grid Systems</strong>.</p>
                    </div>
                    <button class="btn-primary" id="exportPdfBtn"><i class="fas fa-file-pdf"></i> Export Report</button>
                </header>
                
                <div class="dashboard-grid">
                    <!-- Progress Card -->
                    <div class="card full-width-card">
                        <div class="progress-header">
                            <h3>Build Planning Progress</h3>
                            <span id="progress-text">0% Ready</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" id="main-progress-bar" style="width: 0%"></div>
                        </div>
                        <p class="progress-tip" id="progress-tip">Start by adding items to your budget!</p>
                    </div>

                    <div class="card summary-card">
                        <div class="icon-box budget"><i class="fas fa-dollar-sign"></i></div>
                        <div class="info">
                            <h3>Total Budget</h3>
                            <p class="big-number" id="dash-total-cost">$0</p>
                        </div>
                    </div>
                    <div class="card summary-card">
                        <div class="icon-box weight"><i class="fas fa-weight-hanging"></i></div>
                        <div class="info">
                            <h3>Est. Weight</h3>
                            <p class="big-number" id="dash-total-weight">0 lbs</p>
                        </div>
                    </div>
                    <div class="card summary-card">
                        <div class="icon-box solar"><i class="fas fa-bolt"></i></div>
                        <div class="info">
                            <h3>Daily Energy</h3>
                            <p class="big-number" id="dash-total-energy">0 Wh</p>
                        </div>
                    </div>
                </div>

                <div class="card chart-card">
                    <h3>Budget Distribution</h3>
                    <div class="chart-container">
                        <canvas id="dashboardChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Budget View -->
            <div id="budget" class="view">
                <header>
                    <div>
                        <h1>Budget Tracker</h1>
                        <p>Keep your build financially on track. Categorize expenses for <strong>Lumber</strong>, <strong>Trailer</strong>, <strong>Electrical</strong>, and more to prevent cost overruns.</p>
                    </div>
                    <button class="btn-primary" id="addBudgetBtn"><i class="fas fa-plus"></i> Add Item</button>
                </header>
                
                <div class="tool-container">
                    <div class="table-responsive">
                        <table id="budgetTable">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Category</th>
                                    <th>Cost</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Injected by JS -->
                            </tbody>
                        </table>
                    </div>
                    <div class="total-row">
                        <span>Total Estimated Cost:</span>
                        <span id="budgetTotalDisplay">$0.00</span>
                    </div>
                </div>
            </div>

            <!-- Weight View -->
            <div id="weight" class="view">
                <header>
                    <div>
                        <h1>Weight Estimator</h1>
                        <p><strong>Safety First:</strong> Ensure your tiny house stays within your trailer's <strong>GVWR</strong> (Gross Vehicle Weight Rating). Track the weight of every material to remain road-legal.</p>
                    </div>
                    <div class="header-inputs">
                        <label>Trailer GVWR (lbs): <input type="number" id="trailerGvwr" value="10000"></label>
                        <label>Trailer Weight (lbs): <input type="number" id="trailerWeight" value="1500"></label>
                    </div>
                </header>

                <div class="tool-container">
                    <div class="weight-meter-container">
                        <div class="meter-label">
                            <span>Payload Usage</span>
                            <span id="payloadDisplay">0 / 8500 lbs</span>
                        </div>
                        <div class="meter-bar">
                            <div id="weightFill" class="meter-fill" style="width: 0%"></div>
                        </div>
                        <div id="weightWarning" class="warning-text"></div>
                    </div>

                    <div class="add-item-form">
                        <input type="text" id="weightItemName" placeholder="Item Name (e.g. Framing Lumber)">
                        <input type="number" id="weightItemLbs" placeholder="Weight (lbs)">
                        <button class="btn-secondary" id="addWeightBtn">Add</button>
                    </div>

                    <ul id="weightList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Solar View -->
            <div id="solar" class="view">
                <header>
                    <div>
                        <h1>Solar System Sizing</h1>
                        <p>Planning to go <strong>Off-Grid</strong>? Input your appliances and usage hours to calculate the exact <strong>Solar Panel Array</strong> (Watts) and <strong>Battery Bank</strong> (Ah) size you need.</p>
                    </div>
                </header>

                <div class="tool-container">
                    <div class="solar-results">
                        <div class="result-box">
                            <h4>Daily Consumption</h4>
                            <span id="totalWh">0 Wh</span>
                        </div>
                        <div class="result-box">
                            <h4>Rec. Solar Panels</h4>
                            <span id="recPanels">0 W</span>
                            <small>(Assuming 5 peak sun hours)</small>
                        </div>
                        <div class="result-box">
                            <h4>Rec. Battery Bank</h4>
                            <span id="recBattery">0 Ah</span>
                            <small>(@ 12V, 50% depth of discharge)</small>
                        </div>
                    </div>

                    <div class="add-item-form">
                        <input type="text" id="solarAppliance" placeholder="Appliance (e.g. LED Lights)">
                        <input type="number" id="solarWatts" placeholder="Watts">
                        <input type="number" id="solarHours" placeholder="Hours/Day">
                        <button class="btn-secondary" id="addSolarBtn">Add</button>
                    </div>

                    <ul id="solarList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Insulation View -->
            <div id="insulation" class="view">
                <header>
                    <div>
                        <h1>Insulation Calculator</h1>
                        <p>Design a high-performance thermal envelope. Calculate your wall's total <strong>R-Value</strong> and thickness to ensure year-round comfort and energy efficiency.</p>
                    </div>
                </header>
                <div class="tool-container">
                    <div class="solar-results">
                        <div class="result-box">
                            <h4>Total R-Value</h4>
                            <span id="totalRValue">R-0</span>
                        </div>
                        <div class="result-box">
                            <h4>Wall Thickness</h4>
                            <span id="totalThickness">0"</span>
                        </div>
                    </div>
                    
                    <div class="add-item-form">
                        <select id="insulMaterial">
                            <option value="6.5">Closed Cell Spray Foam (R-6.5/in)</option>
                            <option value="5.0">XPS Rigid Foam (R-5.0/in)</option>
                            <option value="4.0">Mineral Wool (R-4.0/in)</option>
                            <option value="3.5">Fiberglass (R-3.5/in)</option>
                            <option value="1.2">Plywood/OSB (R-1.2/in)</option>
                            <option value="0.45">Drywall (R-0.45/in)</option>
                            <option value="0.8">Wood Siding (R-0.8/in)</option>
                            <option value="0">Other (Custom)</option>
                        </select>
                        <input type="number" id="insulThickness" placeholder="Thickness (inches)" step="0.1">
                        <button class="btn-secondary" id="addLayerBtn">Add Layer</button>
                    </div>

                    <ul id="layerList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Water View -->
            <div id="water" class="view">
                <header>
                    <h1>Water Usage Estimator</h1>
                    <p>Size your <strong>Fresh</strong> and <strong>Grey Water Tanks</strong> correctly. Estimate daily gallon usage based on your lifestyle (showers, dishes, etc.).</p>
                </header>
                <div class="tool-container">
                    <div class="solar-results">
                        <div class="result-box">
                            <h4>Daily Fresh Water</h4>
                            <span id="totalGallons">0 Gal</span>
                        </div>
                        <div class="result-box">
                            <h4>Rec. Grey Tank</h4>
                            <span id="recGreyTank">0 Gal</span>
                            <small>(Capacity for 3 days)</small>
                        </div>
                    </div>

                    <div class="add-item-form">
                        <select id="waterActivity">
                            <option value="2.5">Shower (2.5 gal/min)</option>
                            <option value="1.5">Kitchen Sink (1.5 gal/min)</option>
                            <option value="0.5">Bathroom Sink (0.5 gal/min)</option>
                            <option value="1.6">Flush Toilet (1.6 gal/flush)</option>
                            <option value="0">Compost Toilet (0 gal)</option>
                            <option value="1">Drinking/Cooking (1 gal/day)</option>
                        </select>
                        <input type="number" id="waterQuantity" placeholder="Minutes or Count">
                        <button class="btn-secondary" id="addWaterBtn">Add</button>
                    </div>

                    <ul id="waterList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for Budget -->
    <div id="budgetModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Add Budget Item</h2>
            <form id="budgetForm">
                <div class="form-group">
                    <label>Item Name</label>
                    <input type="text" id="budgetName" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="budgetCategory">
                        <option value="Trailer">Trailer & Foundation</option>
                        <option value="Lumber">Lumber & Framing</option>
                        <option value="Exterior">Exterior (Siding/Roof)</option>
                        <option value="Windows">Windows & Doors</option>
                        <option value="Insulation">Insulation</option>
                        <option value="Electrical">Electrical & Solar</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Interior">Interior Finishes</option>
                        <option value="Appliances">Appliances</option>
                        <option value="Tools">Tools & Permits</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Estimated Cost ($)</label>
                    <input type="number" id="budgetCost" required>
                </div>
                <button type="submit" class="btn-primary">Add Item</button>
            </form>
        </div>
    </div>
    
    <div id="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>