<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#5c946e">
    <title>Tiny House Build Companion | Free Planner & Calculator</title>
    <meta name="description" content="The ultimate free tool for tiny house builders. Plan your budget, estimate trailer weight, size off-grid solar panels, calculate insulation R-values, and track water usage.">
    <meta name="keywords" content="tiny house planner, tiny house calculator, solar sizing calculator, trailer weight estimator, tiny home budget, off-grid calculator, DIY tiny house">
    <meta name="author" content="Tiny House Nation">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Tiny House Build Companion | Free Planner & Calculator">
    <meta property="og:description" content="Plan your tiny house build with precision. Free tools for budgeting, weight estimation, solar sizing, and more.">
    
    <!-- JSON-LD for Generative Engine Optimization (GEO) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Tiny House Build Companion",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "A comprehensive utility suite for DIY tiny house builders including budget tracking, weight estimation, and solar system sizing.",
      "featureList": ["Budget Tracker", "Weight Estimator", "Solar Sizing Calculator", "Insulation R-Value Calculator", "Water Usage Estimator", "PDF Report Export"]
    }
    </script>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CPZ8WZRMF0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CPZ8WZRMF0');
    </script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="brand">
                <i class="fas fa-home"></i>
                <span>THN Companion</span>
            </div>
            
            <!-- Profile Manager -->
            <div class="profile-section">
                <label>Current Build:</label>
                <div class="profile-controls">
                    <select id="profileSelect"></select>
                    <button id="newProfileBtn" title="New Profile"><i class="fas fa-plus"></i></button>
                    <button id="deleteProfileBtn" title="Delete Profile"><i class="fas fa-trash-alt"></i></button>
                </div>
            </div>

            <nav role="tablist">
                <button class="nav-btn active" data-tab="dashboard" role="tab" aria-selected="true" title="Dashboard">
                    <i class="fas fa-columns"></i> <span>Dashboard</span>
                </button>
                <button class="nav-btn" data-tab="checklist" role="tab" aria-selected="false" title="Build Checklist">
                    <i class="fas fa-tasks"></i> <span>Build Checklist</span>
                </button>
                <button class="nav-btn" data-tab="floorplan" role="tab" aria-selected="false" title="Floor Plan">
                    <i class="fas fa-layer-group"></i> <span>Floor Plan</span>
                </button>
                <button class="nav-btn" data-tab="budget" role="tab" aria-selected="false" title="Budget Tracker">
                    <i class="fas fa-calculator"></i> <span>Budget Tracker</span>
                </button>
                <button class="nav-btn" data-tab="weight" role="tab" aria-selected="false" title="Weight Estimator">
                    <i class="fas fa-balance-scale"></i> <span>Weight Estimator</span>
                </button>
                <button class="nav-btn" data-tab="solar" role="tab" aria-selected="false" title="Solar Sizing">
                    <i class="fas fa-sun"></i> <span>Solar Sizing</span>
                </button>
                <button class="nav-btn" data-tab="insulation" role="tab" aria-selected="false" title="Insulation">
                    <i class="fas fa-layer-group"></i> <span>Insulation</span>
                </button>
                <button class="nav-btn" data-tab="water" role="tab" aria-selected="false" title="Water">
                    <i class="fas fa-tint"></i> <span>Water</span>
                </button>
            </nav>
            
            <!-- Utility Buttons -->
            <div class="sidebar-utilities">
                <button id="themeToggle" class="utility-btn" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="exportDataBtn" class="utility-btn" title="Export Backup">
                    <i class="fas fa-download"></i>
                </button>
                <button id="importDataBtn" class="utility-btn" title="Import Backup">
                    <i class="fas fa-upload"></i>
                </button>
                <input type="file" id="importDataInput" accept=".json" style="display:none;">
            </div>
            
            <div class="save-status" id="saveStatus" aria-live="polite">
                <i class="fas fa-check-circle"></i> Auto-saved
            </div>
            <div class="keyboard-hint">
                <small>Press <kbd>?</kbd> for shortcuts</small>
            </div>
        </aside>

        <main class="content-area">
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <header>
                    <div>
                        <h1><i class="fas fa-home"></i> Project Overview</h1>
                        <p>Welcome to your <strong>Tiny House Build Companion</strong>. Track your progress, manage your budget, and plan your off-grid systems all in one place.</p>
                    </div>
                    <button class="btn-primary" id="exportPdfBtn"><i class="fas fa-file-pdf"></i> Export Report</button>
                </header>
                
                <div class="dashboard-grid">
                    <!-- Progress Card -->
                    <div class="card full-width-card progress-card-enhanced">
                        <div class="progress-header">
                            <div>
                                <h3><i class="fas fa-tasks"></i> Build Planning Progress</h3>
                                <p class="progress-subtitle">Complete all planning sections to prepare for your build</p>
                            </div>
                            <div class="progress-badge" id="progress-badge">
                                <span id="progress-text">0%</span>
                                <small>Ready</small>
                            </div>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" id="main-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="progress-milestones">
                            <span class="milestone" data-percent="25"><i class="fas fa-clipboard-list"></i> Budget</span>
                            <span class="milestone" data-percent="50"><i class="fas fa-weight"></i> Weight</span>
                            <span class="milestone" data-percent="75"><i class="fas fa-sun"></i> Solar</span>
                            <span class="milestone" data-percent="100"><i class="fas fa-check-circle"></i> Ready!</span>
                        </div>
                    </div>

                    <div class="card summary-card clickable" data-goto="budget">
                        <div class="icon-box budget"><i class="fas fa-dollar-sign"></i></div>
                        <div class="info">
                            <h3>Total Budget</h3>
                            <p class="big-number" id="dash-total-cost">$0</p>
                            <span class="card-action">View Details <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </div>
                    <div class="card summary-card clickable" data-goto="weight">
                        <div class="icon-box weight"><i class="fas fa-weight-hanging"></i></div>
                        <div class="info">
                            <h3>Est. Weight</h3>
                            <p class="big-number" id="dash-total-weight">0 lbs</p>
                            <span class="card-action">View Details <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </div>
                    <div class="card summary-card clickable" data-goto="solar">
                        <div class="icon-box solar"><i class="fas fa-bolt"></i></div>
                        <div class="info">
                            <h3>Daily Energy</h3>
                            <p class="big-number" id="dash-total-energy">0 Wh</p>
                            <span class="card-action">View Details <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </div>
                </div>
                
                <!-- Tip of the Day -->
                <div class="tip-of-day card">
                    <div class="tip-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Tip of the Day</h4>
                        <p id="tipText">Loading tip...</p>
                    </div>
                    <button id="newTipBtn" class="tip-refresh" title="Get new tip">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                    <div class="action-grid">
                        <button class="action-card" data-goto="floorplan">
                            <i class="fas fa-drafting-compass"></i>
                            <span>Design Layout</span>
                        </button>
                        <button class="action-card" data-goto="checklist">
                            <i class="fas fa-clipboard-check"></i>
                            <span>Build Checklist</span>
                        </button>
                        <button class="action-card" data-goto="insulation">
                            <i class="fas fa-temperature-low"></i>
                            <span>Plan Insulation</span>
                        </button>
                        <button class="action-card" data-goto="water">
                            <i class="fas fa-tint"></i>
                            <span>Size Tanks</span>
                        </button>
                    </div>
                </div>

                <div class="card chart-card">
                    <h3><i class="fas fa-chart-pie"></i> Budget Distribution</h3>
                    <div class="chart-container">
                        <canvas id="dashboardChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Checklist View -->
            <div id="checklist" class="view">
                <header>
                    <div>
                        <h1><i class="fas fa-clipboard-check"></i> Build Checklist</h1>
                        <p>Your step-by-step roadmap from <strong>Planning</strong> to <strong>Move-In Day</strong>. Click phases to expand.</p>
                    </div>
                    <div class="checklist-header-stats">
                        <div class="stat-ring" id="checklist-ring">
                            <svg viewBox="0 0 36 36">
                                <path class="ring-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <path class="ring-fill" id="checklist-ring-fill" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                            </svg>
                            <span id="checklist-percent">0%</span>
                        </div>
                        <span class="stat-label">Complete</span>
                    </div>
                </header>
                
                <div class="tool-container checklist-container-enhanced">
                    <div id="checklist-container">
                        <!-- Injected by JS -->
                    </div>
                </div>
            </div>

            <!-- Floor Plan View -->
            <div id="floorplan" class="view">
                <header>
                    <div>
                        <h1><i class="fas fa-drafting-compass"></i> Floor Plan Designer</h1>
                        <p>Design your dream layout. Drag furniture onto the trailer canvas and arrange your space.</p>
                    </div>
                    <div class="header-inputs fp-header-controls">
                        <div class="trailer-size-control">
                            <label><i class="fas fa-ruler-horizontal"></i> Trailer Length</label>
                            <div class="size-input-group">
                                <button class="size-btn" id="lengthMinus"><i class="fas fa-minus"></i></button>
                                <input type="number" id="planLength" value="24" min="10" max="40">
                                <span class="size-unit">ft</span>
                                <button class="size-btn" id="lengthPlus"><i class="fas fa-plus"></i></button>
                            </div>
                        </div>
                        <button class="btn-secondary" id="resetPlanBtn"><i class="fas fa-trash-alt"></i> Clear All</button>
                    </div>
                </header>
                
                <div class="floorplan-layout">
                    <div class="palette-container">
                        <div class="palette-section">
                            <h4><i class="fas fa-bed"></i> Bedroom</h4>
                            <div class="palette-grid">
                                <div class="palette-item" draggable="true" data-type="bed-queen"><i class="fas fa-bed"></i> Queen Bed</div>
                                <div class="palette-item" draggable="true" data-type="bed-twin"><i class="fas fa-bed"></i> Twin Bed</div>
                                <div class="palette-item" draggable="true" data-type="closet"><i class="fas fa-door-closed"></i> Closet</div>
                            </div>
                        </div>
                        
                        <div class="palette-section">
                            <h4><i class="fas fa-couch"></i> Living</h4>
                            <div class="palette-grid">
                                <div class="palette-item" draggable="true" data-type="sofa"><i class="fas fa-couch"></i> Sofa</div>
                                <div class="palette-item" draggable="true" data-type="table"><i class="fas fa-table"></i> Table</div>
                                <div class="palette-item" draggable="true" data-type="desk"><i class="fas fa-laptop"></i> Desk</div>
                            </div>
                        </div>
                        
                        <div class="palette-section">
                            <h4><i class="fas fa-utensils"></i> Kitchen</h4>
                            <div class="palette-grid">
                                <div class="palette-item" draggable="true" data-type="kitchen"><i class="fas fa-sink"></i> Counter</div>
                                <div class="palette-item" draggable="true" data-type="fridge"><i class="fas fa-temperature-low"></i> Fridge</div>
                                <div class="palette-item" draggable="true" data-type="stove"><i class="fas fa-fire"></i> Stove</div>
                            </div>
                        </div>
                        
                        <div class="palette-section">
                            <h4><i class="fas fa-bath"></i> Bathroom</h4>
                            <div class="palette-grid">
                                <div class="palette-item" draggable="true" data-type="shower"><i class="fas fa-shower"></i> Shower</div>
                                <div class="palette-item" draggable="true" data-type="toilet"><i class="fas fa-toilet"></i> Toilet</div>
                                <div class="palette-item" draggable="true" data-type="vanity"><i class="fas fa-hands-wash"></i> Vanity</div>
                            </div>
                        </div>
                        
                        <div class="palette-section">
                            <h4><i class="fas fa-th"></i> Structure</h4>
                            <div class="palette-grid">
                                <div class="palette-item" draggable="true" data-type="stairs"><i class="fas fa-stairs"></i> Stairs</div>
                                <div class="palette-item" draggable="true" data-type="door"><i class="fas fa-door-open"></i> Door</div>
                                <div class="palette-item" draggable="true" data-type="window"><i class="fas fa-window-maximize"></i> Window</div>
                            </div>
                        </div>
                        
                        <div id="item-properties" class="properties-panel" style="display:none;">
                            <h4><i class="fas fa-sliders-h"></i> Selected Item</h4>
                            <div class="prop-row">
                                <div class="prop-group">
                                    <label>Width</label>
                                    <div class="prop-input-group">
                                        <input type="number" id="prop-width" step="0.5" min="0.5">
                                        <span>ft</span>
                                    </div>
                                </div>
                                <div class="prop-group">
                                    <label>Depth</label>
                                    <div class="prop-input-group">
                                        <input type="number" id="prop-height" step="0.5" min="0.5">
                                        <span>ft</span>
                                    </div>
                                </div>
                            </div>
                            <div class="prop-actions">
                                <button id="prop-rotate" class="prop-btn"><i class="fas fa-redo"></i> Rotate</button>
                                <button id="prop-delete" class="prop-btn danger"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="canvas-wrapper">
                        <div class="canvas-toolbar">
                            <button class="toolbar-btn" id="zoomOut" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <span id="zoomLevel">100%</span>
                            <button class="toolbar-btn" id="zoomIn" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <div class="toolbar-divider"></div>
                            <button class="toolbar-btn" id="zoomFit" title="Fit to View"><i class="fas fa-expand"></i></button>
                        </div>
                        <div class="canvas-container">
                            <div class="canvas-scaler" id="canvas-scaler">
                                <div id="floorplan-canvas" class="floorplan-canvas">
                                    <!-- Trailer outline and items injected here -->
                                </div>
                            </div>
                        </div>
                        <div class="canvas-footer">
                            <div class="dimensions-display">
                                <i class="fas fa-ruler-combined"></i>
                                <span id="canvas-dims">8.5' x 24'</span>
                            </div>
                            <div class="canvas-legend">
                                <span class="legend-item"><span class="legend-dot wheel"></span> Wheel Wells</span>
                                <span class="legend-item"><span class="legend-dot hitch"></span> Hitch</span>
                            </div>
                            <p class="help-text"><i class="fas fa-info-circle"></i> Drag to move • Click to select • Double-click to rotate</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Budget View -->
            <div id="budget" class="view">
                <header>
                    <div>
                        <h1>Budget Tracker</h1>
                        <p>Keep your build financially on track. Categorize expenses for <strong>Lumber</strong>, <strong>Trailer</strong>, <strong>Electrical</strong>, and more to prevent cost overruns.</p>
                    </div>
                    <button class="btn-primary" id="addBudgetBtn"><i class="fas fa-plus"></i> Add Item</button>
                </header>
                
                <div class="tool-container">
                    <div class="table-responsive">
                        <table id="budgetTable">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Category</th>
                                    <th>Cost</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Injected by JS -->
                            </tbody>
                        </table>
                    </div>
                    <div class="total-row">
                        <span>Total Estimated Cost:</span>
                        <span id="budgetTotalDisplay">$0.00</span>
                    </div>
                </div>
            </div>

            <!-- Weight View -->
            <div id="weight" class="view">
                <header>
                    <div>
                        <h1><i class="fas fa-balance-scale"></i> Weight Estimator</h1>
                        <p><strong>Safety First:</strong> Ensure your tiny house stays within your trailer's <strong>GVWR</strong>.</p>
                    </div>
                    <div class="header-inputs weight-header">
                        <div class="weight-input-group">
                            <label><i class="fas fa-truck"></i> GVWR</label>
                            <div class="input-with-unit">
                                <input type="number" id="trailerGvwr" value="10000">
                                <span>lbs</span>
                            </div>
                        </div>
                        <div class="weight-input-group">
                            <label><i class="fas fa-trailer"></i> Trailer</label>
                            <div class="input-with-unit">
                                <input type="number" id="trailerWeight" value="1500">
                                <span>lbs</span>
                            </div>
                        </div>
                    </div>
                </header>

                <div class="tool-container">
                    <div class="weight-meter-container enhanced-meter">
                        <div class="meter-header">
                            <div class="meter-icon"><i class="fas fa-weight-hanging"></i></div>
                            <div class="meter-info">
                                <span class="meter-title">Payload Usage</span>
                                <span id="payloadDisplay" class="meter-value">0 / 8500 lbs</span>
                            </div>
                            <div class="meter-percent" id="weightPercent">0%</div>
                        </div>
                        <div class="meter-bar">
                            <div id="weightFill" class="meter-fill" style="width: 0%"></div>
                            <div class="meter-markers">
                                <span style="left:50%">50%</span>
                                <span style="left:85%" class="warning">85%</span>
                            </div>
                        </div>
                        <div id="weightWarning" class="warning-text"></div>
                    </div>

                    <!-- Quick Add Presets -->
                    <div class="presets-section">
                        <h4><i class="fas fa-magic"></i> Quick Add Common Materials</h4>
                        <div class="presets-grid">
                            <button class="preset-btn weight-preset" data-name="2x4 Stud (8ft)" data-weight="13"><i class="fas fa-ruler"></i> 2x4 Stud</button>
                            <button class="preset-btn weight-preset" data-name="Sheet of Plywood" data-weight="75"><i class="fas fa-th-large"></i> Plywood</button>
                            <button class="preset-btn weight-preset" data-name="Rigid Foam 4x8" data-weight="8"><i class="fas fa-square"></i> Foam Board</button>
                            <button class="preset-btn weight-preset" data-name="Metal Roofing Panel" data-weight="25"><i class="fas fa-home"></i> Roof Panel</button>
                            <button class="preset-btn weight-preset" data-name="Window (avg)" data-weight="50"><i class="fas fa-window-maximize"></i> Window</button>
                            <button class="preset-btn weight-preset" data-name="Entry Door" data-weight="80"><i class="fas fa-door-closed"></i> Door</button>
                        </div>
                    </div>

                    <div class="add-item-form">
                        <input type="text" id="weightItemName" placeholder="Custom Item Name">
                        <input type="number" id="weightItemLbs" placeholder="Weight (lbs)">
                        <button class="btn-secondary" id="addWeightBtn"><i class="fas fa-plus"></i> Add</button>
                    </div>

                    <ul id="weightList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Solar View -->
            <div id="solar" class="view">
                <header>
                    <div>
                        <h1><i class="fas fa-sun"></i> Solar System Sizing</h1>
                        <p>Planning to go <strong>Off-Grid</strong>? Calculate your <strong>Solar Panel Array</strong> and <strong>Battery Bank</strong> size.</p>
                    </div>
                </header>

                <div class="tool-container">
                    <div class="solar-results enhanced-results">
                        <div class="result-box">
                            <div class="result-icon"><i class="fas fa-plug"></i></div>
                            <h4>Daily Consumption</h4>
                            <span id="totalWh">0 Wh</span>
                        </div>
                        <div class="result-box highlight">
                            <div class="result-icon"><i class="fas fa-solar-panel"></i></div>
                            <h4>Rec. Solar Panels</h4>
                            <span id="recPanels">0 W</span>
                            <small>(5 peak sun hours)</small>
                        </div>
                        <div class="result-box highlight">
                            <div class="result-icon"><i class="fas fa-car-battery"></i></div>
                            <h4>Rec. Battery Bank</h4>
                            <span id="recBattery">0 Ah</span>
                            <small>(12V, 50% DoD)</small>
                        </div>
                    </div>

                    <!-- Quick Add Presets -->
                    <div class="presets-section">
                        <h4><i class="fas fa-magic"></i> Quick Add Common Appliances</h4>
                        <div class="presets-grid">
                            <button class="preset-btn" data-name="LED Lights (5 bulbs)" data-watts="50" data-hours="5"><i class="fas fa-lightbulb"></i> LED Lights</button>
                            <button class="preset-btn" data-name="Phone Charger" data-watts="10" data-hours="2"><i class="fas fa-mobile-alt"></i> Phone</button>
                            <button class="preset-btn" data-name="Laptop" data-watts="50" data-hours="4"><i class="fas fa-laptop"></i> Laptop</button>
                            <button class="preset-btn" data-name="Mini Fridge" data-watts="50" data-hours="8"><i class="fas fa-temperature-low"></i> Mini Fridge</button>
                            <button class="preset-btn" data-name="Vent Fan" data-watts="30" data-hours="4"><i class="fas fa-fan"></i> Vent Fan</button>
                            <button class="preset-btn" data-name="Water Pump" data-watts="60" data-hours="0.5"><i class="fas fa-faucet"></i> Water Pump</button>
                        </div>
                    </div>

                    <div class="add-item-form">
                        <input type="text" id="solarAppliance" placeholder="Custom Appliance Name">
                        <input type="number" id="solarWatts" placeholder="Watts">
                        <input type="number" id="solarHours" placeholder="Hours/Day">
                        <button class="btn-secondary" id="addSolarBtn"><i class="fas fa-plus"></i> Add</button>
                    </div>

                    <ul id="solarList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Insulation View -->
            <div id="insulation" class="view">
                <header>
                    <div>
                        <h1>Insulation Calculator</h1>
                        <p>Design a high-performance thermal envelope. Calculate your wall's total <strong>R-Value</strong> and thickness to ensure year-round comfort and energy efficiency.</p>
                    </div>
                </header>
                <div class="tool-container">
                    <div class="solar-results">
                        <div class="result-box">
                            <h4>Total R-Value</h4>
                            <span id="totalRValue">R-0</span>
                        </div>
                        <div class="result-box">
                            <h4>Wall Thickness</h4>
                            <span id="totalThickness">0"</span>
                        </div>
                    </div>
                    
                    <div class="add-item-form">
                        <select id="insulMaterial">
                            <option value="6.5">Closed Cell Spray Foam (R-6.5/in)</option>
                            <option value="5.0">XPS Rigid Foam (R-5.0/in)</option>
                            <option value="4.0">Mineral Wool (R-4.0/in)</option>
                            <option value="3.5">Fiberglass (R-3.5/in)</option>
                            <option value="1.2">Plywood/OSB (R-1.2/in)</option>
                            <option value="0.45">Drywall (R-0.45/in)</option>
                            <option value="0.8">Wood Siding (R-0.8/in)</option>
                            <option value="0">Other (Custom)</option>
                        </select>
                        <input type="number" id="insulThickness" placeholder="Thickness (inches)" step="0.1">
                        <button class="btn-secondary" id="addLayerBtn">Add Layer</button>
                    </div>

                    <ul id="layerList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>

            <!-- Water View -->
            <div id="water" class="view">
                <header>
                    <h1>Water Usage Estimator</h1>
                    <p>Size your <strong>Fresh</strong> and <strong>Grey Water Tanks</strong> correctly. Estimate daily gallon usage based on your lifestyle (showers, dishes, etc.).</p>
                </header>
                <div class="tool-container">
                    <div class="solar-results">
                        <div class="result-box">
                            <h4>Daily Fresh Water</h4>
                            <span id="totalGallons">0 Gal</span>
                        </div>
                        <div class="result-box">
                            <h4>Rec. Grey Tank</h4>
                            <span id="recGreyTank">0 Gal</span>
                            <small>(Capacity for 3 days)</small>
                        </div>
                    </div>

                    <div class="add-item-form">
                        <select id="waterActivity">
                            <option value="2.5">Shower (2.5 gal/min)</option>
                            <option value="1.5">Kitchen Sink (1.5 gal/min)</option>
                            <option value="0.5">Bathroom Sink (0.5 gal/min)</option>
                            <option value="1.6">Flush Toilet (1.6 gal/flush)</option>
                            <option value="0">Compost Toilet (0 gal)</option>
                            <option value="1">Drinking/Cooking (1 gal/day)</option>
                        </select>
                        <input type="number" id="waterQuantity" placeholder="Minutes or Count">
                        <button class="btn-secondary" id="addWaterBtn">Add</button>
                    </div>

                    <ul id="waterList" class="item-list">
                        <!-- Injected by JS -->
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for Budget -->
    <div id="budgetModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Add Budget Item</h2>
            <form id="budgetForm">
                <div class="form-group">
                    <label>Item Name</label>
                    <input type="text" id="budgetName" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="budgetCategory">
                        <option value="Trailer">Trailer & Foundation</option>
                        <option value="Lumber">Lumber & Framing</option>
                        <option value="Exterior">Exterior (Siding/Roof)</option>
                        <option value="Windows">Windows & Doors</option>
                        <option value="Insulation">Insulation</option>
                        <option value="Electrical">Electrical & Solar</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Interior">Interior Finishes</option>
                        <option value="Appliances">Appliances</option>
                        <option value="Tools">Tools & Permits</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Estimated Cost ($)</label>
                    <input type="number" id="budgetCost" required>
                </div>
                <button type="submit" class="btn-primary">Add Item</button>
            </form>
        </div>
    </div>
    
    <div id="toast-container"></div>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="script.js"></script>
</body>
</html>